/**
 * =====================================================
 * 英语听写/复读工具 - CSS 样式表 (粉嫩少女风)
 * =====================================================
 *
 * 本样式表为英语学习工具提供视觉设计，采用粉嫩少女风格
 * 主要包含以下模块：
 * 1. 基础样式 - 页面整体布局和背景
 * 2. 菜单栏样式 - 顶部导航和设置面板
 * 3. 布局样式 - 主要内容区域结构
 * 4. 复读模式样式 - 单词滚动列表和播放界面
 * 5. 听写模式样式 - 输入弹窗和结果展示
 * 6. 按钮样式 - 各种交互按钮
 * 7. 状态颜色 - 正确/警告/错误状态
 */

/* ===== 引入 Google 字体 ===== */
/*
 * Cinzel: 哥特风格的衬线字体，用于标题和重要文字
 * Cormorant Garamond: 优雅的衬线字体，用于正文内容
 * display=swap: 确保字体加载时先使用系统字体，避免文字闪烁
 */
@import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600;700&family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;1,400&family=Caveat:wght@400;500;600;700&family=Ma+Shan+Zheng&display=swap');

/* #region 基础样式 */
/* ===================================================================
 * 基础样式区域
 * 定义页面的基本布局、背景色和全局样式
 * =================================================================== */

body {
    margin: 0;                                          /* 移除浏览器默认外边距 */
    font-family: 'Cormorant Garamond', 'Georgia', serif; /* 设置默认字体，优先使用 Cormorant Garamond */

    /*
     * 创建 135 度角的渐变背景
     * 从淡粉色 (#fff5f5) 过渡到淡橙粉色 (#fef6f0) 再到粉白色 (#fff8f5)
     * 营造柔和温暖的视觉效果
     */
    background: linear-gradient(135deg, #fff5f5 0%, #fef6f0 50%, #fff8f5 100%);

    /* 使用 flex 布局，让 menu 和 container 正确分配空间 */
    display: flex;
    flex-direction: column;
    overflow: hidden;           /* 隐藏溢出内容，防止出现滚动条 */
    height: 100vh;              /* 固定视口高度 */
    width: 100%;                /* 宽度占满整个视口 */
}

/*
 * 背景装饰层 - 柔和圆点图案
 * 使用伪元素 ::before 创建装饰性背景，不影响实际内容
 */
body::before {
    content: '';                /* 伪元素必须有 content 属性 */
    position: fixed;            /* 固定定位，始终覆盖整个视口 */
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;

    /*
     * 创建重复的圆点图案背景
     * radial-gradient 创建径向渐变，形成小圆点
     * 圆点颜色为半透明粉色 (rgba(255, 182, 193, 0.15))
     * 圆点半径 2px，超出部分透明
     */
    background-image: radial-gradient(circle, rgba(255, 182, 193, 0.327) 2px, transparent 2px);
    background-size: 40px 40px; /* 每个圆点图案单元格大小为 40x40 像素 */
    pointer-events: none;       /* 禁用鼠标事件，使点击能穿透到下层元素 */
    z-index: 0;                 /* 置于最底层 */
}
/* #endregion */

/* #region 菜单栏样式 */
/* ===================================================================
 * 菜单栏样式区域
 * 包含顶部导航栏、标题、按钮和设置面板
 * =================================================================== */

/*
 * 顶部菜单容器
 * 包含标题和模式切换按钮
 */
#menu {
    position: relative;         /* 相对定位，作为子元素的定位参考 */
    overflow: visible;          /* 允许内容超出显示 */

    /* Flexbox 布局，让标题和按钮排成一行 */
    display: flex;
    align-items: center;        /* 垂直居中 */
    justify-content:space-between;    /* 水平居中 */
    gap: 30px;                  /* 元素之间的间距 */
    flex-wrap: wrap;            /* 宽度不够时换行 */

    /* 粉色渐变背景 */
    background: linear-gradient(180deg, #ffd6e0 0%, #ffccd5 100%);

    /* 底部边框，半透明深粉色 */
    border-bottom: 1px solid rgba(255, 150, 170, 0.4);

    padding: 15px  30px 20px;         /* 内边距 */

    /* 柔和的粉色阴影，增加层次感 */
    box-shadow: 0 3px 12px rgba(255, 182, 193, 0.25);

    z-index: 100;               /* 较高层级，确保菜单栏显示在内容之上 */
}

/* 铁线圈装订效果 - 只在听写模式显示 */
body.dictation-mode #menu::after {
    content: '';
    position: absolute;
    left: 0;
    right: 0;
    bottom: -30px;  /* 超出菜单底部 */
    height: 50px;
    margin: 0 3%;
    background: url('scr/iron.PNG') repeat-x center top;
    background-size: auto 100%;
    z-index: 101;
    pointer-events: none;
}


/*
 * 菜单栏标题样式
 * 显示应用名称 "ENGLISH DICTATION"
 */
#menu h1 {
    font-family: 'Cinzel', 'Georgia', serif; /* 使用哥特风格字体 */
    color: #8b5a5a;             /* 深玫瑰棕色，在粉色背景上更醒目 */
    margin: 0;                  /* 无外边距 */
    font-weight: 500;           /* 中等字重 */
    letter-spacing: 4px;        /* 字母间距，增加高级感 */
    font-size: 36px;            /* 标题字号 - 放大 */
    text-shadow: 0 1px 2px rgba(255, 255, 255, 0.3); /* 轻微白色阴影提升可读性 */
    white-space: nowrap;        /* 防止标题换行 */
}

/*
 * 菜单栏按钮样式
 * 用于"复读模式"和"听写模式"切换按钮
 */
#menu button {
    font-family: 'Cinzel', 'Georgia', serif; /* 哥特风格字体 */
    border-radius: 25px;        /* 圆角边框，呈胶囊形状 */
    width: 220px;               /* 固定宽度，保持按钮一致 */
    font-size: 18px;            /* 按钮文字大小 - 放大 */
    font-weight: 500;           /* 中等字重 */
    padding: 14px 28px;         /* 内边距：上下 14px，左右 28px */

    /* 浅色玻璃质感背景 */
    background: linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,248,250,0.85) 100%);

    /* 柔和的白色边框 */
    border: 1px solid rgba(255, 255, 255, 0.7);

    /* 过渡动画 */
    transition: all 0.3s ease-out;

    box-sizing: border-box;     /* 边框和内边距计入宽度 */
    color: #a07070;             /* 玫瑰棕色文字 */
    cursor: pointer;            /* 鼠标悬停时显示手型光标 */
    margin: 0;                  /* 间距由 flex gap 控制 */
    text-transform: uppercase;  /* 文字转为大写 */
    letter-spacing: 2px;        /* 字母间距 */

    /* 轻微阴影增加立体感 */
    box-shadow: 0 2px 8px rgba(180, 140, 150, 0.15);
}

/*
 * 菜单按钮悬停状态
 * 鼠标悬停时的视觉反馈
 */
#menu button:hover {
    transform: translateY(-2px) scale(1.1);    /* 向上微移 2px，产生浮起效果 */
    border-color: rgba(255, 200, 210, 0.8); /* 边框带粉色 */
    color: #8b5a5a;                 /* 文字颜色加深 */

    /* 悬停时带一点粉色 */
    background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,240,245,0.9) 100%);

    /* 添加柔和发光阴影 */
    box-shadow: 0 4px 15px rgba(200, 150, 160, 0.55);
}

#menu button:active{
    transform: translateY(-2px) scale(1.0);    
}

/*
 * 设置触发器容器
 * 包含齿轮图标和悬停时显示的设置面板
 */
.settings-trigger {
    text-align: center;
    flex-shrink: 0;             /* 不被 flex 压缩 */
    width: 50px;                /* 固定宽度，只显示齿轮图标 */
}

/*
 * 齿轮图标样式
 * 点击/悬停可打开设置面板
 */
.gear-icon {
    width: 50px;
    height: 50px;
    cursor: pointer;
    display: inline-block;
    position: relative;
    font-size: 0;               /* 隐藏emoji文字 */
    color: transparent;
}

/* 背景十字线（不转动） */
.gear-icon::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 120%;
    height: 120%;
    background: url('scr/setBackground_icon.PNG') no-repeat center center;
    background-size: contain;
    z-index: 1;
}

/* 齿轮图案（转动） */
.gear-icon::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: url('scr/set_icon.PNG') no-repeat center center;
    background-size: contain;
    z-index: 2;
    transition: transform 0.7s ease-out;
}

/*
 * 齿轮图标悬停动画
 * 鼠标悬停时齿轮旋转 180 度
 */
.settings-trigger:hover .gear-icon::after {
    transform: rotate(180deg);  /* 旋转 180 度 */
}

/*
 * 设置面板样式
 * 悬停在设置触发器上时显示的下拉面板
 */
.settings-trigger .sidebar {
    position: absolute;         /* 绝对定位，相对于 .settings-trigger */
    right: 50px;                   /* 右对齐 */
    top: 100%;                  /* 位于触发器下方 */
    margin-top: 15px;           /* 与触发器的间距 */
    width: 240px;               /* 面板宽度 */

    /*
     * 毛玻璃效果背景
     * 多层半透明渐变，配合 backdrop-filter 实现
     */
    background: linear-gradient(135deg,
        rgba(255, 255, 255, 0.45) 0%,
        rgba(255, 245, 245, 0.35) 50%,
        rgba(255, 220, 230, 0.3) 100%);

    border: 1px solid rgba(255, 255, 255, 0.5); /* 半透明白色边框 */
    border-radius: 20px;        /* 圆角 */

    /*
     * 多层阴影：
     * 1. 外部粉色柔和阴影
     * 2. 内部白色边框高光
     */
    box-shadow:
        0 8px 32px rgba(255, 182, 193, 0.2),
        0 0 0 1px rgba(255, 255, 255, 0.1) inset;

    /* 初始状态：隐藏 */
    opacity: 0;                 /* 完全透明 */
    visibility: hidden;         /* 不可见，不占用交互空间 */
    transform: translateY(-30px) scale(0.9); /* 略微上移并缩小 */

    /* 贝塞尔曲线过渡，实现流畅的弹出动画 */
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

    padding: 20px;              /* 内边距 */
    box-sizing: border-box;     /* 边框盒模型 */
    z-index: 1000;              /* 高层级，显示在最上层 */

    /*
     * 背景模糊效果（毛玻璃）
     * blur(20px) - 模糊程度
     * saturate(180%) - 增加饱和度
     */
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%); /* Safari 兼容 */
}

/*
 * 设置面板显示状态
 * 鼠标悬停在触发器上时，面板淡入并下移
 */
.settings-trigger:hover .sidebar {
    opacity: 1;                 /* 完全不透明 */
    visibility: visible;        /* 可见 */
    transform: translateY(0) scale(1.1); /* 恢复正常位置和大小 */
}

/*
 * 设置面板标题样式
 */
.settings-trigger .sidebar h3 {
    font-family: 'Cinzel', 'Georgia', serif; /* 哥特字体 */
    color: #c48b8b;             /* 玫瑰棕色 */
    font-size: 14px;            /* 字号 */
    font-weight: 600;           /* 粗体 */
    margin: 0 0 15px 0;         /* 底部外边距 */
    padding-bottom: 10px;       /* 底部内边距 */

    /* 底部分隔线 */
    border-bottom: 1px solid rgba(255, 182, 193, 0.4);

    text-transform: uppercase;  /* 大写字母 */
    letter-spacing: 2px;        /* 字母间距 */
}

/*
 * 设置项标签样式
 * 包含设置项名称和对应的输入控件
 */
.settings-trigger .sidebar label {
    font-family: 'Cormorant Garamond', 'Georgia', serif; /* 正文字体 */
    display: flex;              /* 弹性布局 */
    justify-content: space-between; /* 两端对齐：名称在左，控件在右 */
    align-items: center;        /* 垂直居中 */
    color: #9c7a7a;             /* 淡玫瑰棕色 */
    font-size: 14px;            /* 字号 */
    margin-bottom: 12px;        /* 每项之间的间距 */
    transition: color 0.2s;     /* 颜色过渡动画 */
}

/* 设置项标签悬停状态 */
.settings-trigger .sidebar label:hover {
    color: #8b6060;             /* 悬停时颜色加深 */
}

/*
 * 数字输入框样式
 * 用于设置播放次数、间隔时间等数值
 */
.settings-trigger .sidebar input[type="number"] {
    width: 55px;                /* 固定宽度 */
    padding: 6px 8px;           /* 内边距 */
    border: 1px solid rgba(255, 182, 193, 0.5); /* 粉色边框 */
    border-radius: 8px;         /* 圆角 */
    background: #fff9f9;        /* 淡粉色背景 */
    color: #8b6f6f;             /* 文字颜色 */
    text-align: center;         /* 文字居中 */
    font-weight: 600;           /* 粗体数字 */
    transition: all 0.2s;       /* 过渡动画 */
    font-family: 'Cormorant Garamond', 'Georgia', serif; /* 字体 */
}

/* 数字输入框获得焦点时的样式 */
.settings-trigger .sidebar input[type="number"]:focus {
    outline: none;              /* 移除默认轮廓 */
    border-color: #ffb6c1;      /* 边框颜色加深 */
    box-shadow: 0 0 10px rgba(255, 182, 193, 0.3); /* 粉色发光效果 */
}

/*
 * 复选框样式
 * 用于开关类设置项
 */
.settings-trigger .sidebar input[type="checkbox"] {
    width: 18px;                /* 宽度 */
    height: 18px;               /* 高度 */
    accent-color: #ffb6c1;      /* 选中时的强调色（现代浏览器支持） */
    cursor: pointer;            /* 手型光标 */
}

/*
 * 文本域样式
 * 用于输入单词列表等多行文本
 */
.settings-trigger .sidebar textarea {
    font-family: 'Cormorant Garamond', 'Georgia', serif;
    width: 100%;
    height: 330px;
    padding: 12px 18px;
    margin: 0;
    border: 1px solid rgba(255, 182, 193, 0.4);
    border-radius: 12px;
    background: #fffafa;
    color: #8b6f6f;
    font-size: 14px;
    resize: none;
    box-sizing: border-box;
    transition: all 0.2s;
    overflow-x: hidden;         /* 不滚动，靠 sidebar 加宽 */
}

/* 文本域获得焦点时的样式 */
.settings-trigger .sidebar textarea:focus {
    outline: none;              /* 移除默认轮廓 */
    border-color: #ffb6c1;      /* 边框颜色加深 */
    box-shadow: 0 0 15px rgba(255, 182, 193, 0.2); /* 柔和发光 */
}

/* 文本域占位符样式 */
.settings-trigger .sidebar textarea::placeholder {
    color: #c9a8a8;             /* 淡玫瑰色占位符文字 */
}

/* #endregion */

/* #region 布局样式 */
/* ===================================================================
 * 布局样式区域
 * 定义页面主体结构和内容区域布局
 * =================================================================== */

/*
 * 主容器
 * 包含所有主要内容，使用 Flexbox 布局
 */
.container {
    display: flex;              /* 弹性盒布局 */
    flex: 1;                    /* 占据 menu 之外的剩余空间 */
    min-height: 0;              /* 允许 flex 子元素收缩，修复滚动问题 */
    position: relative;         /* 相对定位 */
    z-index: 1;                 /* 层级高于背景装饰 */
}

/*
 * 主内容区域
 * 显示复读/听写界面
 */
.main {
    flex: 1;                    /* 占据剩余所有空间 */
    min-height: 0;              /* 关键：允许收缩，让 overflow 滚动生效 */
    padding: 15px 30px 30px 30px; /* 内边距 */
    background: transparent;    /* 透明背景，显示 body 的渐变 */
    overflow-y: auto;           /* 垂直方向可滚动 */
    overflow-x: hidden;         /* 水平方向隐藏溢出 */
    -webkit-overflow-scrolling: touch; /* iOS 惯性滚动 */
    overscroll-behavior: contain;      /* 防止滚动穿透 */
}

/*
 * 工作区容器
 * 包含实际的功能界面
 */
#workplace {
    position: relative;         /* 相对定位，让伪元素能正确定位 */
    overflow: visible;          /* 允许内容超出显示 */
    margin: 0px 0px 100px 0px;   /* 底部留出适当空间 */
}
#workplace h3{
    font-size: 200%;
}
/*
 * 提示文字样式
 * 显示操作提示和说明
 */
.hint {
    font-family: 'Cormorant Garamond', 'Georgia', serif; /* 正文字体 */
    font-size: 13px;            /* 小字号 */
    color: #c9a8a8;             /* 淡玫瑰色 */
    margin-top: 10px;           /* 顶部间距 */
}
/* #endregion */

/* #region 复读模式样式（Repeater Mode）*/
/* ===================================================================
 * 复读模式样式区域
 * 包含单词滚动列表、当前单词显示等组件
 * =================================================================== */

/*
 * 复读器主容器
 * 显示可滚动的单词列表
 */
.repeater-container {
    position: relative;         /* 相对定位，作为子元素定位参考 */
    height: 400px;              /* 固定高度 */
    overflow: hidden;           /* 隐藏溢出内容 */
    border-radius: 25px;        /* 大圆角 */

    /*
     * 3D 透视效果
     * perspective: 观察者与 z=0 平面的距离
     * 值越小，3D 效果越明显
     */
    perspective: 800px;
    perspective-origin: 50% 50%; /* 透视原点在中心 */

    border: 1px solid rgba(255, 182, 193, 0.4); /* 粉色边框 */
    box-shadow: 0 8px 30px rgba(255, 182, 193, 0.15); /* 柔和阴影 */
    background: #fffafa;        /* 淡粉背景 */
}

/*
 * 中心指示条
 * 固定在容器中央，指示当前播放的单词位置
 */
.center-pointer {
    position: absolute;         /* 绝对定位 */
    left: 0;
    right: 0;
    top: 50%;                   /* 垂直居中 */
    transform: translateY(-50%); /* 修正居中偏移 */
    height: 60px;               /* 与单词项高度一致 */

    /*
     * 水平渐变背景
     * 两端透明，中间为半透明粉色
     * 形成聚光灯效果
     */
    background: linear-gradient(90deg,
        transparent 0%,
        rgba(255, 209, 220, 0.3) 20%,
        rgba(255, 182, 193, 0.3) 80%,
        transparent 100%);

    /* 上下边框线 */
    border-top: 1px solid rgba(255, 182, 193, 0.6);
    border-bottom: 1px solid rgba(255, 182, 193, 0.6);

    pointer-events: none;       /* 不响应鼠标事件，点击穿透 */
    z-index: 10;                /* 显示在单词列表之上 */
    display: flex;
    align-items: center;        /* 内容垂直居中 */
}

/*
 * 滚动区域
 * 包含所有单词项，支持平滑滚动
 */
.repeater-scroll {
    height: 100%;               /* 占满容器高度 */
    overflow-y: auto;           /* 垂直滚动 */
    scroll-behavior: smooth;    /* 平滑滚动动画 */

    /* 垂直渐变背景 */
    background: linear-gradient(180deg, #fffafa 0%, #fff5f5 50%, #fffafa 100%);

    transform-style: preserve-3d; /* 保持 3D 变换效果 */
}

/*
 * 隐藏滚动条（仅复读模式的滚动区域）
 * 保持界面简洁美观
 */
.repeater-scroll::-webkit-scrollbar {
    display: none;              /* Chrome/Safari/Edge 隐藏滚动条 */
}

.repeater-scroll {
    -ms-overflow-style: none;   /* IE and Edge */
    scrollbar-width: none;      /* Firefox */
}

/*
 * 单词项样式
 * 列表中每个单词的容器
 */
.word-item {
    font-family: 'Cormorant Garamond', 'Georgia', serif; /* 正文字体 */
    height: 60px;               /* 固定高度 */
    padding: 0 20px;            /* 左右内边距 */
    display: flex;              /* 弹性布局 */
    justify-content: space-around; /* 子元素均匀分布 */
    align-items: center;        /* 垂直居中 */

    /* 贝塞尔曲线过渡，实现流畅的状态切换动画 */
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);

    transform-style: preserve-3d; /* 保持 3D 效果 */
    color: #c9a8a8;             /* 默认淡色文字 */
}

/*
 * 当前播放的单词项（激活状态）
 * 显示在中心指示条位置
 */
.word-item.active {
    /* 水平渐变高亮背景 */
    background: linear-gradient(90deg,
        transparent 0%,
        rgba(255, 209, 220, 0.25) 20%,
        rgba(255, 182, 193, 0.25) 80%,
        transparent 100%);
    color: #8b6060;             /* 文字颜色加深 */
}

/*
 * 单词文本样式（英文单词）
 */
.word-item strong {
    font-family: 'Cormorant Garamond', 'Georgia', serif; /* 正文字体，保留大小写 */
    font-size: 22px;            /* 较大字号 - 放大 */
    font-weight: 600;           /* 粗体 */
    transition: all 0.3s;       /* 过渡动画 */
}

/* 激活状态下的单词文本 */
.word-item.active strong {
    color: #c48b8b;             /* 玫瑰棕色 */
}

/*
 * 单词翻译文本样式
 */
.word-item .translation {
    color: #c9a8a8;             /* 淡玫瑰色 */
    font-size: 18px;            /* 字号 - 放大 */
}

/*
 * 单词信息卡片
 * 显示当前单词的详细信息
 */
.word-info {
    text-align: center;         /* 文字居中 */
    padding: 20px;              /* 内边距 */
    background: rgba(255, 250, 250, 0.95); /* 半透明白色背景 */
    border: 1px solid rgba(255, 182, 193, 0.4); /* 粉色边框 */
    border-radius: 20px;        /* 圆角 */
    margin-top: 15px;           /* 顶部间距 */
    box-shadow: 0 4px 20px rgba(255, 182, 193, 0.15); /* 柔和阴影 */
}

/*
 * 当前单词显示（大字）
 */
.current-word {
    font-family: 'Cinzel', 'Georgia', serif; /* 哥特字体 */
    font-size: 36px;            /* 大字号 - 放大 */
    font-weight: 600;           /* 粗体 */
    color: #c48b8b;             /* 玫瑰棕色 */
}

/*
 * 当前单词翻译
 */
.current-translation {
    font-family: 'Cormorant Garamond', 'Georgia', serif; /* 正文字体 */
    font-size: 20px;            /* 字号 - 放大 */
    color: #9c7a7a;             /* 淡棕色 */
    margin-top: 8px;            /* 顶部间距 */
}

/*
 * 播放次数显示
 */
.play-count {
    font-family: 'Cormorant Garamond', 'Georgia', serif; /* 正文字体 */
    font-size: 18px;            /* 字号 - 放大 */
    color: #d4a5a5;             /* 玫瑰色 */
    margin-top: 8px;            /* 顶部间距 */
    font-weight: 600;           /* 粗体 */
}
/* #endregion */

/* #region  听写模式样式（Dictation Mode）- 纸质试卷批改风格 */
/* ===================================================================
 * 听写模式样式区域 - 仿真纸质试卷批改风格
 * 设计理念：模拟真实的作业本/试卷批改效果
 * 保持粉嫩少女风的整体色调
 * =================================================================== */

/*
 * 听写模式专用 - 模拟试卷纸张
 * 米黄色纸张背景 + 装订线效果
 */
body.dictation-mode #workplace {
    background-image:
        /* 左侧装订线 */
        linear-gradient(90deg,
            transparent 0px,
            rgba(255, 182, 193, 0.3) 2px,
            transparent 3px,
            transparent 30px,
            rgba(255, 182, 193, 0.15) 31px,
            transparent 32px,
            transparent 100px,
            rgb(223, 151, 162) 101px,
            transparent 102px
        ),
        /* 横线纹理 - 模拟作业本格子 */
        repeating-linear-gradient(
            transparent 0px,
            transparent 39px,
            rgba(200, 180, 170, 0.2) 39px,
            rgba(200, 180, 170, 0.2) 40px
        ),
        /* 纸张底色 - 米黄色 */
        linear-gradient(180deg, #fffef8 0%, #fdf8f0 50%, #faf5eb 100%);

    background-repeat: repeat, repeat, repeat;
    background-position: top left, top left, top left;
    background-size: auto, auto, auto;

    padding: 25px 25px 25px 45px;  /* 左边留出装订线空间 */
    margin: 80px 10px 30px 10px;   /* 上80 右10 下30 左10 */
    border-radius: 8px;

    /* 纸张阴影和边缘效果 */
    box-shadow:
        /* 纸张厚度阴影 */
        2px 3px 8px rgba(139, 111, 111, 0.1),
        /* 纸张边缘高光 */
        inset 0 1px 0 rgba(255, 255, 255, 0.8),
        /* 底部折痕阴影 */
        inset 0 -2px 5px rgba(200, 180, 170, 0.1);

    /* 纸张微微卷曲效果 */
    border: 1px solid rgba(200, 180, 170, 0.3);
}

/* 撕裂纸条效果 - 只在听写模式显示 */
body.dictation-mode #workplace::before {
    content: '';
    position: absolute;
    left: 0px;
    right: 0px;
    top: -45px;  /* 超出容器顶部 */
    height: 50px;
    background: url("scr/break.PNG") repeat-x center center;
    background-size: auto 100%;
    z-index: 10;
    pointer-events: none;
}

/* 纸张右下角卷边效果 - 只在听写模式显示 */
body.dictation-mode #workplace::after {
    content: '';
    position: absolute;
    bottom: 0;
    right: 0;
    width: 30px;
    height: 30px;
    background: linear-gradient(135deg,
        transparent 50%,
        rgba(255, 240, 235, 0.8) 50%,
        rgba(250, 235, 225, 0.9) 100%);
    border-radius: 0 0 8px 0;
    box-shadow: -2px -2px 5px rgba(139, 111, 111, 0.05);
}

/*
 * 弹窗容器 - 模拟草稿纸/便签
 */
.popup {
    position: fixed;
    top: 40%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(-1deg); /* 微微倾斜，更自然 */

    /* 便签纸背景 */
    background:
        /* 横线 */
        repeating-linear-gradient(
            transparent 0px,
            transparent 27px,
            rgba(200, 180, 170, 0.25) 27px,
            rgba(200, 180, 170, 0.25) 28px
        ),
        /* 纸张色 */
        linear-gradient(180deg, #fffef5 0%, #fff9f0 100%);

    padding: 20px 25px 25px 25px;
    border-radius: 3px;  /* 纸张的轻微圆角 */

    /* 纸张边缘 */
    border: 1px solid rgba(200, 180, 170, 0.4);
    border-top: 3px solid #ffb6c1; /* 顶部粉色装饰条 */

    /* 纸张阴影 - 浮起效果 */
    box-shadow:
        3px 4px 12px rgba(139, 111, 111, 0.15),
        0 0 0 1px rgba(255, 255, 255, 0.5) inset,
        /* 折痕效果 */
        inset 0 60px 50px -50px rgba(255, 255, 255, 0.3);

    z-index: 100;
    min-width: 320px;
    text-align: center;
}

/* 便签纸顶部撕边效果 - 大头钉位置留空 */
.popup::before {
    content: '';
    position: absolute;
    top: -8px;
    left: 10px;
    right: 10px;
    height: 8px;
    background: repeating-linear-gradient(90deg,
        transparent 0px,
        transparent 8px,
        #fffef5 8px,
        #fffef5 10px,
        transparent 10px,
        transparent 12px
    );
    filter: drop-shadow(0 1px 1px rgba(0,0,0,0.05));
    /* 中间留出大头钉的空间 */
    clip-path: polygon(0 0, 42% 0, 42% 100%, 58% 100%, 58% 0, 100% 0, 100% 100%, 0 100%);
}

/*
 * 弹窗拖拽手柄 - 顶部区域（大头钉图片）
 */
.popup-drag-handle {
    position: absolute;
    top: -9px;
    left: 50%;
    transform: translateX(-50%);
    width: 32px;
    height: 32px;
    cursor: grab;
    z-index: 10;
    transition: transform 0.2s ease;
    /* 使用大头钉图片 */
    background: url('scr/pin.png') no-repeat center center;
    background-size: contain;
    /* 添加阴影效果 */
    filter: drop-shadow(0 2px 3px rgba(139, 111, 111, 0.3));
}

.popup-drag-handle:hover {
    transform: translateX(-50%) scale(1.05);
    filter: drop-shadow(0 3px 5px rgba(139, 111, 111, 0.4)) brightness(1.05);
}

.popup-drag-handle:active {
    cursor: grabbing;
    transform: translateX(-50%) translateY(-1px) scale(1.2);
}

/* 拖拽时的弹窗样式 */
.popup.dragging {
    opacity: 0.9;
    box-shadow:
        5px 8px 25px rgba(139, 111, 111, 0.25),
        0 0 0 2px rgba(255, 182, 193, 0.4);
    transition: none; /* 拖拽时禁用过渡，提高响应速度 */
}

#dictationPopup h3 {
    font-family: 'Caveat', 'Ma Shan Zheng', cursive;  /* 英文+中文手写风格 */
    color: #8b6f6f;
    font-size: 24px;
    margin: 5px 0 15px 0;
    font-weight: 600;
}

#retryInfo {
    font-family: 'Caveat', cursive;
    color: #c48b8b;
    font-size: 18px;
    margin-bottom: 10px;
}

/*
 * 弹窗输入框 - 模拟手写答题区
 */
.popup input {
    font-family: 'Caveat', cursive;  /* 手写风格字体 */
    font-size: 26px;
    padding: 12px 20px;
    width: 70%;

    /* 只有底部边框，像书写线 */
    border: none;
    border-bottom: 2px dashed rgba(139, 111, 111, 0.3);
    border-radius: 0;

    background: transparent;
    color: #5a4a4a;
    text-align: center;
    transition: all 0.3s;
}

.popup input:focus {
    outline: none;
    border-bottom-color: #c48b8b;
    border-bottom-style: solid;
}

.popup input::placeholder {
    color: #c9b8b8;
    font-style: italic;
}

/*
 * 结果项容器 - 模拟试卷上的一道题
 */
.result-item {
    display: flex;
    align-items: flex-start;
    padding: 12px 15px;
    margin: 0;
    background: transparent;
    border: none;
    border-bottom: 1px solid rgba(200, 180, 170, 0.15);
    border-radius: 0;
    transition: background 0.2s;
    font-size: 18px;
    position: relative;
}

.result-item:last-child {
    border-bottom: none;
}


/*
 * 结果序号 - 题号样式
 */
.result-index {
    font-family: 'Cinzel', Georgia, serif;
    font-weight: 600;
    min-width: 40px;
    color: #8b6f6f;
    font-size: 16px;
}

/*
 * 答题尝试记录 - 批改区域
 */
.result-attempts {
    flex: 1;
    font-family: 'Caveat', 'Ma Shan Zheng', cursive;  /* 英文+中文手写风格 */
    font-size: 22px;
    color: #5a4a4a;
    line-height: 1.6;
}

/* 每次尝试的样式 */
.result-attempts > div {
    padding: 4px 8px;
    margin: 2px 0;
    border-radius: 3px;
    position: relative;
}

/*
 * 结果汇总框 - 成绩单风格
 */
.results-box {
    position: relative;
    margin: 20px 10px;
    padding: 30px;

    /* 成绩单纸张背景 */
    background:
        /* 顶部装饰边框 */
        linear-gradient(180deg,
            #ffb6c1 0px,
            #ffb6c1 4px,
            transparent 4px),
        /* 纸张色 */
        linear-gradient(180deg, #fffef8 0%, #fdf8f0 100%);

    border: 1px solid rgba(200, 180, 170, 0.4);
    border-radius: 5px;
    box-shadow:
        3px 4px 15px rgba(139, 111, 111, 0.12),
        inset 0 1px 0 rgba(255, 255, 255, 0.8);

    text-align: center;
}

/* 成绩单标题 */
.results-box h3 {
    font-family: 'Cinzel', Georgia, serif;
    color: #8b6f6f;
    font-size: 20px;
    margin: 0 0 20px 0;
    padding-bottom: 15px;
    border-bottom: 2px double rgba(255, 182, 193, 0.5);
    letter-spacing: 2px;
}

/* 分数显示 - 大红色手写风格 */
.results-box p strong {
    font-family: 'Caveat', cursive;
    font-size: 48px;
    color: #e25555;
    display: block;
    margin: 15px 0;
    /* 红笔书写效果 */
    text-shadow: 1px 1px 0 rgba(200, 50, 50, 0.1);
}

/* 统计项 */
.results-box p {
    font-family: 'Caveat', cursive;
    font-size: 20px;
    color: #6b5a5a;
    margin: 8px 0;
}

/* 印章效果 - 装饰性 */
.results-box::after {
    content: '批阅';
    position: absolute;
    bottom: 20px;
    right: 25px;
    font-family: 'Cinzel', Georgia, serif;
    font-size: 14px;
    color: rgba(200, 80, 80, 0.6);
    border: 2px solid rgba(200, 80, 80, 0.5);
    border-radius: 50%;
    width: 50px;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    transform: rotate(-15deg);
    /* 印章褪色效果 */
    opacity: 0.7;
}
/* #endregion */

/* #region 按钮样式*/
/* ===================================================================
 * 按钮样式区域
 * 定义各种功能按钮的外观
 * =================================================================== */

/*
 * 暂停/播放按钮 - 圆形显示 Unicode 符号
 */
.btn-pause, .btn-play {
    width: 50px;
    height: 50px;
    padding: 0;
    border-radius: 50%;
    border: 1px solid transparent;
    margin: 8px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/*
 * 暂停按钮 - 橙色调
 */
.btn-pause {
    background: linear-gradient(135deg, #ffd1dc 0%, #ffd1dc 100%);
    border-color: rgba(255, 200, 160, 0.6);
    color: #6b4f4f;
}

/*
 * 播放按钮 - 绿色调
 */
.btn-play {
    background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
    border-color: rgba(195, 230, 203, 0.6);
    color: #4a7c59;
}

.btn-play:hover {
    box-shadow: 0 4px 15px rgba(195, 230, 203, 0.4);
    transform: translateY(-2px);
    background: linear-gradient(135deg, #e2f3e6 0%, #d4edda 100%);
}

/*
 * 声音按钮
 * 粉色调，用于播放单词发音
 */
.btn-sound {
    width: 50px;                /* 固定宽度 */
    height: 50px;               /* 固定高度 */
    border-radius: 50%;         /* 圆形 */
    font-size: 200%;            /* 较大字号（通常显示图标） */
    /* 粉色渐变背景 */
    background: linear-gradient(135deg, #ffd1dc 0%, #ffb6c1 100%);
    border: 1px solid transparent;
}

/* 声音按钮悬停状态 */
.btn-sound:hover, .btn-pause:hover {
    box-shadow: 0 4px 15px rgba(255, 182, 193, 0.4); /* 粉色发光 */
    transform: translateY(-2px); /* 上浮效果 */
    background: linear-gradient(135deg, #ffe4e9 0%, #ffd1dc 100%); /* 背景变浅 */
}
/* #endregion */

/* #region 状态颜色*/
/* ===================================================================
 * 状态颜色区域 - 试卷批改风格
 * 模拟老师红笔批改的效果
 * =================================================================== */

/*
 * 正确状态 - 红色对勾效果
 * 模拟老师用红笔打勾
 */
.correct {
    color: #d45555;             /* 批改红色 */
    font-weight: 600;
    position: relative;
}

/* 正确答案样式 */
.result-attempts .correct {
    padding: 2px 0px;
}

/*
 * 警告状态 - 橙色波浪线效果
 * 表示答错但还有机会
 */
.warning {
    color: #cc7a22;             /* 橙色铅笔色 */
    position: relative;
}

/* 波浪下划线效果 */
.result-attempts .warning {
    padding: 2px 6px;
    /* 波浪线装饰 */
    text-decoration: underline wavy rgba(204, 122, 34, 0.5);
    text-underline-offset: 3px;
}


.failed {
    color: #c55555;             /* 红笔颜色 */
    position: relative;
}

/* 正确答案提示 - 绿色手写风格 */
.result-attempts .failed .correct,
.result-attempts .correct span {
    color: #4a8f4a;
    font-style: italic;
    text-decoration: none;
    background: none;
}
/* #endregion */

/* #region 响应式设计 */
/* ===================================================================
 * 响应式设计区域
 * 根据屏幕大小调整字体和布局
 * =================================================================== */

/* 超大屏幕 (>1400px) */
@media (min-width: 1400px) {
    #menu h1 { font-size: 42px; }
    #menu button { font-size: 20px; width: 240px; padding: 16px 32px; }
    .current-word { font-size: 42px; }
    .current-translation { font-size: 24px; }
    .word-item strong { font-size: 26px; }
    .word-item .translation { font-size: 20px; }
    .popup input { font-size: 32px; }
    .result-item { font-size: 22px; }
    .play-count { font-size: 20px; }
    /* 听写模式 - 大屏适配 */
    body.dictation-mode #workplace { padding: 30px 30px 30px 55px; }
    .result-attempts { font-size: 26px; }
    .results-box h3 { font-size: 24px; }
    .results-box p strong { font-size: 56px; }
    .results-box p { font-size: 22px; }
    #dictationPopup h3 { font-size: 28px; }
}

/* 大屏幕 (1200px - 1399px) - 默认样式已设置 */

/* 中等屏幕 (900px - 1199px) */
@media (min-width: 900px) and (max-width: 1199px) {
    #menu h1 { font-size: 32px; }
    #menu button { font-size: 16px; width: 200px; padding: 12px 24px; }
    .current-word { font-size: 32px; }
    .current-translation { font-size: 18px; }
    .word-item strong { font-size: 20px; }
    .word-item .translation { font-size: 16px; }
    .popup input { font-size: 26px; }
    .result-item { font-size: 18px; }
    /* 听写模式 - 中屏适配 */
    .result-attempts { font-size: 20px; }
    .results-box p strong { font-size: 44px; }
}

/* 小屏幕 / 平板 (600px - 899px) */
@media (min-width: 600px) and (max-width: 899px) {
    #menu h1 { font-size: 24px; letter-spacing: 2px; }
    #menu button { font-size: 14px; width: 150px; padding: 10px 18px; }
    #menu { padding: 12px 15px; gap: 20px; }
    .main { padding: 20px; }
    .current-word { font-size: 28px; }
    .current-translation { font-size: 16px; }
    .word-item strong { font-size: 18px; }
    .word-item .translation { font-size: 14px; }
    .popup { min-width: 320px; padding: 20px; }
    .popup input { font-size: 22px; width: 70%; }
    .repeater-container { height: 350px; }
    .result-item { font-size: 16px; padding: 10px 12px; }
    .settings-trigger { right: 5%; }
    .settings-trigger .sidebar { width: 220px; }
    /* 听写模式 - 平板适配 */
    body.dictation-mode #workplace { padding: 20px 20px 20px 40px; margin: 8px; }
    .result-attempts { font-size: 18px; }
    .results-box { padding: 25px; }
    .results-box p strong { font-size: 40px; }
    .results-box::after { width: 45px; height: 45px; font-size: 12px; }
    #dictationPopup h3 { font-size: 22px; }
}

/* #endregion */
